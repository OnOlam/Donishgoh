{% extends "base.html" %}
{% block content %}

<div class="edit-container">
  <div class="edit-header">
    <h2>‚úèÔ∏è –¢–∞“≥—Ä–∏—Ä–∏ –ú–∞–≤–æ–¥</h2>
    <div class="edit-type-badge">
      {% if material.material_type == 'book' %}üìö –ö–∏—Ç–æ–±
      {% elif material.material_type == 'app' %}üì± –ë–∞—Ä–Ω–æ–º–∞
      {% elif material.material_type == 'image' %}üñºÔ∏è –†–∞—Å–º
      {% elif material.material_type == 'video' %}üé¨ –í–∏–¥–µ–æ
      {% endif %}
    </div>
  </div>

  <div style="height:24px"></div>

  <form method="post" action="{{ url_for('admin_edit_material', material_id=material.id) }}" 
        enctype="multipart/form-data" class="edit-form">
    
    <div class="form-grid">
      <div class="form-group">
        <label class="form-label">üìù –£–Ω–≤–æ–Ω *</label>
        <input class="input" name="title" value="{{ material.title }}" required>
      </div>

      <div class="form-group">
        <label class="form-label">üë§ –ú—É–∞–ª–ª–∏—Ñ/–û—Ñ–∞—Ä–∏–¥–≥–æ—Ä</label>
        <input class="input" name="author" value="{{ material.author if material.author else '' }}">
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">üìÑ –¢–∞–≤—Å–∏—Ñ</label>
      <textarea class="input" name="description" rows="6">{{ material.description if material.description else '' }}</textarea>
    </div>

    <div class="form-group">
      <label class="form-label">üìé –§–∞–π–ª–∏ –Ω–∞–≤—Ä–æ –±–æ—Ä –∫—É–Ω–µ–¥ (opsional)</label>
      
      {% if material.filename %}
        <div class="current-file">
          <span class="current-file-icon">üìÅ</span>
          <span class="current-file-name">–§–∞–π–ª–∏ “∑–æ—Ä”£: {{ material.filename }}</span>
        </div>
      {% endif %}
      
      <div class="file-upload-wrapper">
        <input type="file" name="file" id="fileInput" class="file-input" 
               accept="{% if material.material_type == 'book' %}.pdf,.epub,.mobi,.djvu,.fb2,.doc,.docx
                       {% elif material.material_type == 'app' %}.apk,.exe,.msi,.dmg,.deb,.rpm
                       {% elif material.material_type == 'image' %}.jpg,.jpeg,.png,.gif,.webp,.svg,.bmp
                       {% elif material.material_type == 'video' %}.mp4,.avi,.mkv,.mov,.wmv,.flv,.webm
                       {% endif %}">
        <label for="fileInput" class="file-label">
          <span class="file-icon">üìÅ</span>
          <span id="fileName">–§–∞–π–ª–∏ –Ω–∞–≤—Ä–æ –∏–Ω—Ç–∏—Ö–æ–± –∫—É–Ω–µ–¥...</span>
        </label>
        <div class="file-hint">
          {% if material.material_type == 'book' %}–ò“∑–æ–∑–∞—Ç –¥–æ–¥–∞–≥–∏: PDF, EPUB, MOBI, DJVU, FB2, DOC, DOCX
          {% elif material.material_type == 'app' %}–ò“∑–æ–∑–∞—Ç –¥–æ–¥–∞–≥–∏: APK, EXE, MSI, DMG, DEB, RPM
          {% elif material.material_type == 'image' %}–ò“∑–æ–∑–∞—Ç –¥–æ–¥–∞–≥–∏: JPG, PNG, GIF, WEBP, SVG, BMP
          {% elif material.material_type == 'video' %}–ò“∑–æ–∑–∞—Ç –¥–æ–¥–∞–≥–∏: MP4, AVI, MKV, MOV, WMV, FLV, WEBM
          {% endif %}
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button class="btn btn-large btn-success" type="submit">
        ‚úÖ –ó–∞—Ö–∏—Ä–∞ –∫–∞—Ä–¥–∞–Ω
      </button>
      <a class="btn btn-large btn-secondary" href="{{ url_for('admin') }}">
        ‚ùå –ë–µ–∫–æ—Ä –∫–∞—Ä–¥–∞–Ω
      </a>
    </div>
  </form>
</div>

<script>
document.getElementById('fileInput').addEventListener('change', function(e) {
  const fileName = e.target.files[0] ? e.target.files[0].name : '–ú–∞–≤–æ–¥–∏ –Ω–∞–≤—Ä–æ –∏–Ω—Ç–∏“≥–æ–± –∫—É–Ω–µ–¥...';
  document.getElementById('fileName').textContent = fileName;
});
</script>

{% endblock %}
