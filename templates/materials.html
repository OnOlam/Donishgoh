{% extends "base.html" %}
{% block content %}

<div class="materials-header">
  <h2>
    {% if current_type == 'book' %}ğŸ“š ĞšĞ¸Ñ‚Ğ¾Ğ±Ò³Ğ¾
    {% elif current_type == 'app' %}ğŸ“± Ğ®Ğ°Ñ€Ğ½Ğ¾Ğ¼Ğ°Ò³Ğ¾
    {% elif current_type == 'image' %}ğŸ–¼ï¸ Ğ Ğ°ÑĞ¼Ò³Ğ¾
    {% elif current_type == 'video' %}ğŸ¬ Ğ’Ğ¸Ğ´ĞµĞ¾Ò³Ğ¾
    {% else %}ğŸ“¦ Ò²Ğ°Ğ¼Ğ° Ğ¼Ğ°Ğ²Ğ¾Ğ´Ò³Ğ¾
    {% endif %}
  </h2>
  
  <div class="filter-tabs">
    <a class="filter-tab {% if not current_type %}active{% endif %}" href="{{ url_for('materials') }}">
      Ò²Ğ°Ğ¼Ğ°
    </a>
    <a class="filter-tab {% if current_type == 'book' %}active{% endif %}" href="{{ url_for('materials', material_type='book') }}">
      ğŸ“š ĞšĞ¸Ñ‚Ğ¾Ğ±Ò³Ğ¾
    </a>
    <a class="filter-tab {% if current_type == 'app' %}active{% endif %}" href="{{ url_for('materials', material_type='app') }}">
      ğŸ“± Ğ‘Ğ°Ñ€Ğ½Ğ¾Ğ¼Ğ°Ò³Ğ¾
    </a>
    <a class="filter-tab {% if current_type == 'image' %}active{% endif %}" href="{{ url_for('materials', material_type='image') }}">
      ğŸ–¼ï¸ Ğ Ğ°ÑĞ¼Ò³Ğ¾
    </a>
    <a class="filter-tab {% if current_type == 'video' %}active{% endif %}" href="{{ url_for('materials', material_type='video') }}">
      ğŸ¬ Ğ’Ğ¸Ğ´ĞµĞ¾Ò³Ğ¾
    </a>
  </div>
</div>

<div style="height:24px"></div>

{% if materials %}
  <div class="materials-grid">
    {% for m in materials %}
    <div class="material-card" data-type="{{ m.material_type }}">
      <div class="material-type-badge">
        {% if m.material_type == 'book' %}ğŸ“š ĞšĞ¸Ñ‚Ğ¾Ğ±
        {% elif m.material_type == 'app' %}ğŸ“± Ğ‘Ğ°Ñ€Ğ½Ğ¾Ğ¼Ğ°
        {% elif m.material_type == 'image' %}ğŸ–¼ï¸ Ğ Ğ°ÑĞ¼
        {% elif m.material_type == 'video' %}ğŸ¬ Ğ’Ğ¸Ğ´ĞµĞ¾
        {% endif %}
      </div>
      
      <h4 class="material-title">{{ m.title }}</h4>
      
      {% if m.author %}
        <p class="material-author">ğŸ‘¤ {{ m.author }}</p>
      {% endif %}
      
      <p class="material-description">
        {{ m.description[:150] }}{% if m.description and m.description|length > 150 %}...{% endif %}
      </p>
      
      <div class="material-meta">
        <span class="meta-item">ğŸ‘ï¸ {{ m.view_count }} Ğ´Ğ¸Ğ´Ğ° ÑˆÑƒĞ´</span>
        {% if m.created_at %}
          <span class="meta-item">ğŸ“… {{ m.created_at[:10] }}</span>
        {% endif %}
      </div>
      
      <div class="material-actions">
        <a class="btn btn-primary" href="{{ url_for('material_detail', material_id=m.id) }}">
          ĞŸÑƒÑ€Ñ€Ğ° â†’
        </a>
        {% if m.filename %}
          <a class="btn btn-download" href="{{ url_for('download_file', filename=m.filename) }}">
            â¬‡ï¸ Ğ‘Ğ¾Ñ€Ğ³Ğ¸Ñ€Ó£
          </a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <div class="empty-state">
    <div class="empty-icon">ğŸ“­</div>
    <h3>ĞœĞ°Ğ²Ğ¾Ğ´Ò³Ğ¾ Ñ‘Ñ„Ñ‚ Ğ½Ğ°ÑˆÑƒĞ´Ğ°Ğ½Ğ´.</h3>
    <p class="small">
      {% if current_type %}
        ĞĞ¹Ğ½Ğ¸ Ğ·Ğ°Ğ¼Ğ¾Ğ½ Ğ´Ğ°Ñ€ Ğ¸Ğ½ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ¼Ğ°Ğ²Ğ¾Ğ´ Ğ²ÑƒÒ·ÑƒĞ´ Ğ½Ğ°Ğ´Ğ¾Ñ€Ğ°Ğ´..
      {% else %}
        Ò²Ğ°Ğ½Ó¯Ğ· ÑĞ³Ğ¾Ğ½ Ğ¼Ğ°Ğ²Ğ¾Ğ´ Ğ±Ğ¾Ñ€Ğ³ÑƒĞ·Ğ¾Ñ€Ó£ Ğ½Ğ°ÑˆÑƒĞ´Ğ°Ğ°ÑÑ‚..
      {% endif %}
    </p>
    {% if session.get('admin_level') and session.get('admin_level') >= 1 %}
      <a class="btn btn-primary" href="{{ url_for('admin') }}">
        + ĞœĞ°Ğ²Ğ¾Ğ´ Ğ¸Ğ»Ğ¾Ğ²Ğ° ĞºÑƒĞ½ĞµĞ´
      </a>
    {% endif %}
  </div>
{% endif %}

{% endblock %}
